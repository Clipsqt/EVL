document.addEventListener("DOMContentLoaded", function () {
        const timeInButtons = document.querySelectorAll(".time-in-button");

        timeInButtons.forEach(function (button) {
            button.addEventListener("click", function () {
                const row = this.closest("tr"); // Get the parent row of the clicked button
                const timeInCell = row.querySelector(".time-in"); // Get the "Time In" cell
                const currentTime = new Date().toLocaleTimeString(); // Get the current time

                // Update the "Time In" cell with the current time
                timeInCell.textContent = currentTime;

                // Store the current time in local storage
                localStorage.setItem("time_in", currentTime);

                // Send an AJAX request to update the database
                const scheduledate = row.querySelector(".sched").textContent;
                const fullname = row.querySelector(".fullname").textContent;
                updateDatabase(scheduledate, fullname, currentTime);
                
                // Disable the button
                button.classList.add("disabled"); // Add the "disabled" class
                button.disabled = true; // Disable the button element

                // Remove the click event listener to prevent further clicks
                button.removeEventListener("click", clickHandler);
            });
        });

        // Get the stored time from local storage and display it
        const storedTime = localStorage.getItem("time_in");
        if (storedTime) {
            const timeInCells = document.querySelectorAll(".time-in");
            timeInCells.forEach(function (cell) {
                cell.textContent = storedTime;
            });
        }

        function updateDatabase(scheduledate, fullname, timeIn) {
            const xhr = new XMLHttpRequest();
            xhr.open("POST", "update_time_in.php", true);
            xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    // Handle the response from the server if needed
                }
            };
            const data = `scheduledate=${scheduledate}&fullname=${fullname}&time_in=${timeIn}`;
            xhr.send(data);
        }
    });
</script>
    <script>
 document.addEventListener("DOMContentLoaded", function () {
    const timeInButtons = document.querySelectorAll(".time-in-button");

    timeInButtons.forEach(function (button) {
        button.addEventListener("click", function () {
            const row = this.closest("tr"); // Get the parent row of the clicked button
            const timeInCell = row.querySelector(".time-in"); // Get the "Time In" cell
            const currentTime = new Date().toLocaleTimeString(); // Get the current time

            // Update the "Time In" cell with the current time
            timeInCell.textContent = currentTime;

            // Store the current time in local storage
            localStorage.setItem("time_in", currentTime);

            // Disable the button
            button.classList.add("disabled"); // Add the "disabled" class
            button.disabled = true; // Disable the button element

            // Remove the click event listener to prevent further clicks
            button.removeEventListener("click", clickHandler);
        });
    });

    // Get the stored time from local storage and display it
    const storedTime = localStorage.getItem("time_in");
    if (storedTime) {
        const timeInCells = document.querySelectorAll(".time-in");
        timeInCells.forEach(function (cell) {
            if (cell.textContent.trim() === "") {
                cell.textContent = storedTime;
            }
        });
    }
});